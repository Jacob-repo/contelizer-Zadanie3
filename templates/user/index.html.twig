{% extends 'base.html.twig' %}

{% block title %}Lista użytkowników{% endblock %}

{% block body %}

<!-- Lista użytkowników -->
<div class="container mt-4">
    <h1>Użytkownicy</h1>
    <form method="get" class="mb-3">
        <input type="text" name="name" value="{{ search }}" placeholder="Szukaj..." class="form-control">
    </form>
    <table class="table table-striped">
        <thead><tr><th>ID</th><th>Imię</th><th>Email</th><th>Płeć</th><th>Status</th></tr></thead>
        <tbody>
        {% for user in users %}
            <tr>
                <td>{{ user.id }}</td>
                <td>{{ user.name }}</td>
                <td>{{ user.email }}</td>
                <td>{{ user.gender }}</td>
                <td>{{ user.status }}</td>
                <td><button class="btn btn-sm btn-primary edit-user-btn"
                        data-id="{{ user.id }}"
                        data-name="{{ user.name }}"
                        data-email="{{ user.email }}"
                        data-status="{{ user.status }}">
                    Edytuj
                </button>
                </td>
            </tr>
        {% else %}
            <tr><td colspan="5">Brak wyników</td></tr>
        {% endfor %}
        </tbody>
    </table>
    <div class="d-flex justify-content-between mt-4">
        {% if hasPrev %}
            <a class="btn btn-outline-secondary" href="?page={{ page - 1 }}&name={{ search }}">← Poprzednia</a>
        {% endif %}

        {% if hasNext %}
            <a class="btn btn-outline-primary" href="?page={{ page + 1 }}&name={{ search }}">Następna →</a>
        {% endif %}
    </div>
</div>

<!-- Modal edycji -->
<!-- Modal edycji -->
<div class="modal fade" id="editUserModal" tabindex="-1" aria-labelledby="editUserModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form id="editUserForm">
        <div class="modal-header">
          <h5 class="modal-title" id="editUserModalLabel">Edytuj użytkownika</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Zamknij"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" id="editUserId">
          <div class="form-group">
            <label>Imię</label>
            <input type="text" class="form-control" id="editUserName" required>
          </div>
          <div class="form-group">
            <label>Email</label>
            <input type="email" class="form-control" id="editUserEmail" required>
          </div>
          <div class="form-group">
            <label>Status</label>
            <select class="form-control" id="editUserStatus">
              <option value="active">Aktywny</option>
              <option value="inactive">Nieaktywny</option>
            </select>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Zapisz</button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Anuluj</button>
        </div>
      </form>
    </div>
  </div>
</div>

{% endblock %}

